<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlatEnsino - Portal do Aluno</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f5f7ff',
                            100: '#ebf0fe',
                            200: '#ced9fd',
                            600: '#4f46e5',
                            700: '#4338ca',
                            900: '#1e1b4b',
                        }
                    }
                }
            }
        }

        // Inicializa√ß√£o do Tema (antes do render para evitar flash branco)
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .dark .custom-scroll::-webkit-scrollbar-thumb { background: #334155; }
        
        .page-content { display: none; }
        .page-content.active { display: block; animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-link.active {
            background-color: rgba(99, 102, 241, 0.15);
            border-left: 4px solid #facc15;
            color: white;
        }
        
        .dark .nav-link.active {
            background-color: rgba(24acc15, 0.1);
        }

        #profile-dropdown {
            display: none;
            animation: fadeIn 0.2s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Toggle Theme Animation */
        .sun-icon { transform: rotate(0deg); transition: 0.5s ease; }
        .moon-icon { transform: rotate(0deg); transition: 0.5s ease; }
        .dark .sun-icon { transform: rotate(90deg); opacity: 0; }
        .dark .moon-icon { transform: rotate(0deg); opacity: 1; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-[#0b0f1a] text-slate-900 dark:text-slate-100">

    <div class="flex h-screen overflow-hidden">
        
        <!-- Sidebar -->
        <aside class="w-72 bg-brand-900 dark:bg-slate-950 text-white p-6 hidden lg:flex flex-col shadow-2xl z-20 border-r border-transparent dark:border-slate-800">
            <div class="mb-10 px-2 flex items-center justify-between">
                <h1 class="text-2xl font-black tracking-tighter">PLAT<span class="text-yellow-400">ENSINO</span></h1>
            </div>
            
            <nav class="space-y-2 flex-1">
                <button onclick="showPage('dashboard', this)" class="nav-link active w-full flex items-center space-x-3 p-4 text-indigo-100 rounded-r-xl transition-all group text-left">
                    <i class="fas fa-th-large w-5"></i> 
                    <span class="font-bold">Dashboard</span>
                </button>
                
                <button onclick="showPage('aulas', this)" class="nav-link w-full flex items-center space-x-3 p-4 text-indigo-200 hover:bg-white/5 rounded-xl transition-all group text-left">
                    <i class="fas fa-play-circle w-5 group-hover:text-yellow-400"></i> 
                    <span class="font-bold">Aulas ao Vivo</span>
                </button>
                
                <button onclick="showPage('materiais', this)" class="nav-link w-full flex items-center space-x-3 p-4 text-indigo-200 hover:bg-white/5 rounded-xl transition-all group text-left">
                    <i class="fas fa-folder-open w-5 group-hover:text-yellow-400"></i> 
                    <span class="font-bold">Materiais</span>
                </button>
                
                <button onclick="showPage('simulados', this)" class="nav-link w-full flex items-center space-x-3 p-4 text-indigo-200 hover:bg-white/5 rounded-xl transition-all group text-left">
                    <i class="fas fa-check-double w-5 group-hover:text-yellow-400"></i> 
                    <span class="font-bold">Simulados</span>
                </button>
            </nav>

            <!-- Bottom Actions -->
            <div class="pt-6 border-t border-white/10 flex flex-col space-y-2">
                <!-- Estiliza√ß√£o melhorada do Toggle -->
                <button id="theme-toggle" class="group flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition-all">
                    <div class="flex items-center space-x-3">
                        <div class="relative w-5 h-5 flex items-center justify-center">
                            <i class="fas fa-moon absolute moon-icon hidden dark:block text-yellow-400"></i>
                            <i class="fas fa-sun absolute sun-icon dark:hidden text-yellow-500"></i>
                        </div>
                        <span class="font-bold text-xs uppercase tracking-widest text-indigo-300 group-hover:text-white">Tema</span>
                    </div>
                    <div class="w-10 h-5 bg-slate-700 rounded-full relative p-1 flex items-center transition-colors dark:bg-indigo-600">
                        <div class="w-3 h-3 bg-white rounded-full transition-all transform dark:translate-x-5"></div>
                    </div>
                </button>
                
                <button onclick="logout()" class="flex items-center space-x-3 p-3 text-indigo-300 hover:text-red-400 transition-colors font-bold text-xs uppercase tracking-widest text-left">
                    <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
                </button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="flex-1 flex flex-col h-full overflow-hidden bg-slate-50 dark:bg-[#0b0f1a]">
            
            <!-- Header -->
            <header class="bg-white dark:bg-[#0b0f1a]/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-8 py-4 flex justify-between items-center z-30 transition-colors">
                <div>
                    <h2 id="page-title" class="text-xl font-extrabold text-slate-800 dark:text-white uppercase tracking-tight">Dashboard</h2>
                </div>
                
                <div class="relative">
                    <button id="profileButton" onclick="toggleDropdown()" class="flex items-center space-x-4 focus:outline-none group">
                        <div class="text-right hidden sm:block">
                            <p class="text-[10px] font-black text-indigo-600 dark:text-yellow-400 uppercase tracking-widest">Premium</p>
                            <p class="text-sm font-bold text-slate-700 dark:text-slate-200">Gabriel Silva</p>
                        </div>
                        <div class="w-11 h-11 bg-gradient-to-tr from-indigo-600 to-brand-700 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-indigo-200 dark:shadow-none transition-transform group-hover:scale-105 border-2 border-white dark:border-slate-800">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                    </button>

                    <!-- Dropdown -->
                    <div id="profile-dropdown" class="absolute right-0 mt-4 w-60 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-2xl overflow-hidden">
                        <div class="p-4 border-b border-slate-100 dark:border-slate-800">
                            <p class="text-xs font-bold text-slate-400 uppercase tracking-tighter">Sua Conta</p>
                        </div>
                        <div class="p-2 space-y-1">
                            <a href="#" class="flex items-center space-x-3 p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors font-bold text-sm">
                                <i class="fas fa-user-circle text-indigo-500"></i>
                                <span>Perfil e Configura√ß√µes</span>
                            </a>
                            <a href="#" class="flex items-center space-x-3 p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors font-bold text-sm">
                                <i class="fas fa-medal text-yellow-500"></i>
                                <span>Minhas Conquistas</span>
                            </a>
                        </div>
                        <div class="p-2 bg-slate-50 dark:bg-slate-950">
                            <button onclick="logout()" class="w-full flex items-center space-x-3 p-3 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors text-left font-bold text-sm text-red-600">
                                <i class="fas fa-power-off"></i>
                                <span>Encerrar Sess√£o</span>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Scrollable Viewport -->
            <div class="flex-1 overflow-y-auto p-6 md:p-8 custom-scroll">
                
                <!-- SE√á√ÉO 1: DASHBOARD -->
                <section id="page-dashboard" class="page-content active">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 space-y-8">
                            <!-- Hero Card -->
                            <div class="bg-indigo-600 dark:bg-indigo-700 rounded-[2.5rem] p-10 text-white relative overflow-hidden shadow-2xl shadow-indigo-200 dark:shadow-none">
                                <div class="relative z-10">
                                    <h3 class="text-4xl font-black mb-2 tracking-tight">Fala, Gabriel! üöÄ</h3>
                                    <p class="text-indigo-100 text-lg max-w-md opacity-90">Sua jornada hoje te levar√° longe. Voc√™ est√° a apenas 3 aulas de bater sua meta!</p>
                                    <button class="mt-8 bg-yellow-400 text-indigo-950 px-8 py-4 rounded-2xl font-black hover:bg-yellow-300 transition-all transform hover:-translate-y-1 active:scale-95 shadow-lg">Continuar de onde parei</button>
                                </div>
                                <i class="fas fa-graduation-cap absolute -right-6 -bottom-6 text-[12rem] text-white/10 -rotate-12"></i>
                            </div>

                            <!-- Stats -->
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                                <div class="bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-12 h-12 bg-emerald-100 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 rounded-xl flex items-center justify-center mb-4 text-xl">
                                        <i class="fas fa-fire"></i>
                                    </div>
                                    <h4 class="text-slate-400 dark:text-slate-500 font-bold text-xs uppercase tracking-widest mb-1">Ofensiva de Estudos</h4>
                                    <p class="text-3xl font-black dark:text-white">12 Dias</p>
                                </div>
                                <div class="bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 rounded-xl flex items-center justify-center mb-4 text-xl">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <h4 class="text-slate-400 dark:text-slate-500 font-bold text-xs uppercase tracking-widest mb-1">M√©dia Geral</h4>
                                    <p class="text-3xl font-black dark:text-white">845.2</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Side Content -->
                        <div class="bg-white dark:bg-slate-900 rounded-[2.5rem] p-8 border border-slate-100 dark:border-slate-800 shadow-sm">
                            <h4 class="text-xl font-black mb-8 dark:text-white flex items-center">
                                <span class="w-1.5 h-6 bg-yellow-400 rounded-full mr-3"></span>
                                Agenda de Hoje
                            </h4>
                            <div class="space-y-8">
                                <div class="relative pl-8 before:content-[''] before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:bg-slate-100 dark:before:bg-slate-800 before:rounded-full">
                                    <div class="absolute -left-1.5 top-0 w-4 h-4 rounded-full bg-red-500 ring-4 ring-white dark:ring-slate-900"></div>
                                    <p class="font-black text-sm dark:text-white">Aula ao Vivo: Bio√©tica</p>
                                    <p class="text-xs text-slate-500 font-medium mt-1">19:00 - Prof. Helena</p>
                                </div>
                                <div class="relative pl-8 before:content-[''] before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:bg-slate-100 dark:before:bg-slate-800 before:rounded-full">
                                    <div class="absolute -left-1.5 top-0 w-4 h-4 rounded-full bg-indigo-500 ring-4 ring-white dark:ring-slate-900"></div>
                                    <p class="font-black text-sm dark:text-white">Revis√£o de Matem√°tica</p>
                                    <p class="text-xs text-slate-500 font-medium mt-1">Concluir at√© √†s 23:59</p>
                                </div>
                            </div>
                            
                            <div class="mt-12 p-6 bg-slate-50 dark:bg-slate-950 rounded-3xl border border-slate-100 dark:border-slate-800">
                                <p class="text-xs font-black text-slate-400 uppercase mb-4 text-center">Progresso do M√™s</p>
                                <div class="w-full bg-slate-200 dark:bg-slate-800 h-2 rounded-full overflow-hidden">
                                    <div class="bg-indigo-600 h-full w-[65%] rounded-full"></div>
                                </div>
                                <p class="text-[10px] text-center mt-3 font-bold text-slate-500">65% da meta conclu√≠da</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Outras se√ß√µes mantendo a coer√™ncia visual do tema -->
                <section id="page-aulas" class="page-content">
                    <div class="mb-10">
                        <h3 class="text-3xl font-black text-slate-800 dark:text-white tracking-tight">Aulas ao Vivo</h3>
                        <p class="text-slate-500 font-medium">Interaja com professores e colegas em tempo real.</p>
                    </div>

                    <div class="bg-slate-900 rounded-[2.5rem] overflow-hidden shadow-2xl border-4 border-white dark:border-slate-800">
                        <div class="aspect-video w-full flex items-center justify-center bg-slate-950 relative group cursor-pointer">
                            <div class="text-center z-10">
                                <div class="w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mb-4 mx-auto animate-pulse group-hover:scale-110 transition-transform shadow-xl shadow-indigo-500/20">
                                    <i class="fas fa-play text-white text-2xl ml-1"></i>
                                </div>
                                <p class="text-white font-black tracking-widest uppercase text-[10px]">Clique para entrar na sala</p>
                            </div>
                            <div class="absolute top-6 left-6 bg-red-600 text-white px-4 py-1.5 rounded-full text-[10px] font-black flex items-center space-x-2">
                                <span class="w-2 h-2 bg-white rounded-full animate-ping"></span>
                                <span>AO VIVO</span>
                            </div>
                        </div>
                        <div class="p-8 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800 flex flex-col md:flex-row justify-between items-center gap-6">
                            <div>
                                <h4 class="text-xl font-black dark:text-white">F√≠sica III: Circuitos Complexos</h4>
                                <p class="text-slate-500 text-sm font-medium">Prof. Ricardo ‚Ä¢ 854 alunos online</p>
                            </div>
                            <div class="flex space-x-3">
                                <button class="px-6 py-3 border border-slate-200 dark:border-slate-700 rounded-2xl font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors">Ver Material</button>
                                <button class="bg-indigo-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 dark:shadow-none">Entrar Agora</button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- SE√á√ÉO 3: MATERIAIS -->
                <section id="page-materiais" class="page-content">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10">
                        <div>
                            <h3 class="text-3xl font-black text-slate-800 dark:text-white tracking-tight">Biblioteca Acad√™mica</h3>
                            <p class="text-slate-500 font-medium">Materiais did√°ticos otimizados para seu estudo.</p>
                        </div>
                        <div class="relative">
                            <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"></i>
                            <input type="text" placeholder="O que voc√™ quer estudar?" class="bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-[1.5rem] pl-14 pr-6 py-4 text-sm focus:border-indigo-500 outline-none w-full md:w-80 transition-all shadow-sm">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Card Material -->
                        <div class="group bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 hover:border-indigo-500 transition-all shadow-sm hover:shadow-xl dark:hover:shadow-indigo-500/5">
                            <div class="w-16 h-16 bg-red-100 dark:bg-red-500/10 text-red-600 rounded-2xl flex items-center justify-center mb-8 group-hover:rotate-3 transition-transform">
                                <i class="fas fa-file-pdf text-3xl"></i>
                            </div>
                            <h4 class="font-black text-xl mb-1 dark:text-white">Era Vargas & Populismo</h4>
                            <p class="text-slate-500 text-sm font-medium mb-8">Hist√≥ria do Brasil ‚Ä¢ PDF ‚Ä¢ 14MB</p>
                            <button class="w-full py-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-black text-xs group-hover:bg-indigo-600 group-hover:text-white transition-all uppercase tracking-widest">
                                <i class="fas fa-download mr-2"></i> Baixar Agora
                            </button>
                        </div>
                        
                        <div class="group bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 hover:border-indigo-500 transition-all shadow-sm hover:shadow-xl dark:hover:shadow-indigo-500/5">
                            <div class="w-16 h-16 bg-blue-100 dark:bg-blue-500/10 text-blue-600 rounded-2xl flex items-center justify-center mb-8 group-hover:rotate-3 transition-transform">
                                <i class="fas fa-map text-3xl"></i>
                            </div>
                            <h4 class="font-black text-xl mb-1 dark:text-white">Mapa Mental: Gen√©tica</h4>
                            <p class="text-slate-500 text-sm font-medium mb-8">Biologia II ‚Ä¢ Imagem ‚Ä¢ 2MB</p>
                            <button class="w-full py-4 bg-slate-50 dark:bg-slate-800 rounded-2xl font-black text-xs group-hover:bg-indigo-600 group-hover:text-white transition-all uppercase tracking-widest">
                                <i class="fas fa-eye mr-2"></i> Visualizar
                            </button>
                        </div>
                    </div>
                </section>

                <!-- SE√á√ÉO 4: SIMULADOS -->
                <section id="page-simulados" class="page-content">
                    <div class="mb-10">
                        <h3 class="text-3xl font-black text-slate-800 dark:text-white tracking-tight">Centro de Simulados</h3>
                        <p class="text-slate-500 font-medium">Treine com o tempo real de prova e receba feedback instant√¢neo.</p>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <button class="group p-8 bg-white dark:bg-slate-900 border-2 border-transparent hover:border-emerald-500 rounded-[2.5rem] transition-all text-left shadow-sm hover:shadow-lg">
                            <div class="w-16 h-16 bg-emerald-100 dark:bg-emerald-500/10 text-emerald-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                                <i class="fas fa-microscope text-2xl"></i>
                            </div>
                            <h4 class="text-xl font-black leading-tight mb-2 dark:text-white">Natureza</h4>
                            <p class="text-slate-500 text-sm font-medium">45 Quest√µes ‚Ä¢ 2h 30m</p>
                            <div class="mt-8 flex items-center text-emerald-600 font-black text-xs uppercase tracking-widest group-hover:translate-x-2 transition-transform">
                                Iniciar Prova <i class="fas fa-chevron-right ml-2 text-[10px]"></i>
                            </div>
                        </button>
                        
                        <button class="group p-8 bg-white dark:bg-slate-900 border-2 border-transparent hover:border-indigo-500 rounded-[2.5rem] transition-all text-left shadow-sm hover:shadow-lg">
                            <div class="w-16 h-16 bg-indigo-100 dark:bg-indigo-500/10 text-indigo-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                                <i class="fas fa-calculator text-2xl"></i>
                            </div>
                            <h4 class="text-xl font-black leading-tight mb-2 dark:text-white">Matem√°tica</h4>
                            <p class="text-slate-500 text-sm font-medium">45 Quest√µes ‚Ä¢ 3h 00m</p>
                            <div class="mt-8 flex items-center text-indigo-600 font-black text-xs uppercase tracking-widest group-hover:translate-x-2 transition-transform">
                                Iniciar Prova <i class="fas fa-chevron-right ml-2 text-[10px]"></i>
                            </div>
                        </button>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script>
        // Fun√ß√£o para troca de p√°ginas (SPA)
        function showPage(pageId, btnElement) {
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });

            const targetPage = document.getElementById('page-' + pageId);
            if(targetPage) {
                targetPage.classList.add('active');
            }

            const pageTitles = {
                'dashboard': 'Dashboard de Estudos',
                'aulas': 'Aulas ao Vivo',
                'materiais': 'Biblioteca Acad√™mica',
                'simulados': 'Centro de Simulados'
            };
            document.getElementById('page-title').innerText = pageTitles[pageId] || 'Portal do Aluno';

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Se clicado via bot√µes da sidebar
            if(btnElement) {
                btnElement.classList.add('active');
            }
        }

        // L√≥gica de Dark Mode Aprimorada
        const themeToggleBtn = document.getElementById('theme-toggle');
        
        themeToggleBtn.addEventListener('click', () => {
            // Alterna a classe no elemento raiz
            document.documentElement.classList.toggle('dark');
            
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
            
            // Feedback t√°til ou sonoro poderia ser adicionado aqui
        });

        // Dropdown do Perfil
        function toggleDropdown() {
            const dropdown = document.getElementById('profile-dropdown');
            const isVisible = dropdown.style.display === 'block';
            dropdown.style.display = isVisible ? 'none' : 'block';
        }

        // Logout real usando a rota Django
        function logout() {
            const confirmLogout = window.confirm("Deseja realmente sair do portal?");
            if (confirmLogout) {
                window.location.href = "{% url 'logout' %}";
            }
        }

        // Fecha menus ao clicar fora
        window.addEventListener('click', function(e) {
            const dropdown = document.getElementById('profile-dropdown');
            const btn = document.getElementById('profileButton');
            if (dropdown && btn && !btn.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });
    </script>
</body>
</html>